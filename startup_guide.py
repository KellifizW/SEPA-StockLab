#!/usr/bin/env python3
"""
=============================================================================
SEPA-StockLab ML Analyze â€” å•Ÿå‹•æŒ‡å—
=============================================================================

å¦‚æœç„¡æ³•åŠ è¼‰ ML åˆ†æé é¢ï¼Œè«‹æŒ‰ç…§ä»¥ä¸‹æ­¥é©Ÿ:

æ­¥é©Ÿ 1: é—œé–‰ä»»ä½•å·²åŸ·è¡Œçš„ Python
--------
åœ¨ PowerShell ä¸­åŸ·è¡Œ:
  taskkill /F /IM python.exe

æˆ–å¦‚æœçœ‹ä¸åˆ°ä»»ä½•è¼¸å‡ºï¼Œè¡¨ç¤ºæ²’æœ‰åŸ·è¡Œçš„ Python é€²ç¨‹ï¼ˆé€™æ˜¯å¥½çš„ï¼‰


æ­¥é©Ÿ 2: å•Ÿå‹• Flask ä¼ºæœå™¨
--------
åœ¨ PowerShell ä¸­åŸ·è¡Œ:
  python run_app.py

æˆ–è€…ï¼š
  python app.py

æ‚¨æ‡‰è©²çœ‹åˆ°:
  * Running on http://127.0.0.1:5000
  * WARNING: This is a development server. Do not use it in production.
  * Ctrl+C to quit


æ­¥é©Ÿ 3: é–‹å•Ÿç€è¦½å™¨
--------
æ‰“é–‹æ–°çš„ç€è¦½å™¨åˆ†é ï¼Œè¼¸å…¥ä»¥ä¸‹ URL:
  http://127.0.0.1:5000/ml/analyze

æ‚¨æ‡‰è©²çœ‹åˆ°:
  - æ¨™é¡Œ: "ML å€‹è‚¡åˆ†æ Martin Luk Pullback Analysis"
  - æœå°‹æ¡†å¯ä»¥è¼¸å…¥è‚¡ç¥¨ä»£è™Ÿ
  - "åˆ†æ Analyze" æŒ‰éˆ•

æ­¥é©Ÿ 4: æ¸¬è©¦åˆ†æ
--------
1. è¼¸å…¥è‚¡ç¥¨ä»£è™Ÿï¼Œä¾‹å¦‚: AAPL
2. æŒ‰ä¸‹ "åˆ†æ Analyze" æŒ‰éˆ•
3. ç­‰å¾… 5-30 ç§’ï¼ˆè¦–è‚¡ç¥¨è¤‡é›œåº¦è€Œå®šï¼‰
4. é é¢æ‡‰è©²é¡¯ç¤º:
   - â­ æ˜Ÿç´šè©•åˆ†
   - ğŸ“Š 7ç¶­è©•åˆ†åœ–è¡¨
   - ğŸ’° äº¤æ˜“è¨ˆåŠƒ (Entry, Stop, Target)
   - ğŸ“ˆ æ—¥ç·šåœ– (Daily Chart with EMA + AVWAP)
   - ğŸ“… å‘¨ç·šåœ– (Weekly Chart)

æ­¥é©Ÿ 5: æ¸¬è©¦ç›¯ç›¤æ¨¡å¼
--------
1. åˆ†æå®Œæˆå¾Œï¼Œæ‚¨æœƒçœ‹åˆ°å…©å€‹æŒ‰éˆ• (åœ¨é é¢é ‚éƒ¨):
   ğŸ” è¤‡ç›¤æ¨¡å¼ Review (å·²é¸ä¸­)
   ğŸ“¡ ç›¯ç›¤æ¨¡å¼ Watch Market
   
2. é»æ“Š "ğŸ“¡ ç›¯ç›¤æ¨¡å¼ Watch Market" æŒ‰éˆ•

3. æ‚¨æ‡‰è©²çœ‹åˆ°:
   - ç¶ è‰²/é»ƒè‰²å¸‚å ´ç‹€æ…‹å¾½ç«  (Market Status Badge)
   - å€’è¨ˆæ™‚è¨ˆæ™‚å™¨ (5:00 ä¸‹æ¬¡æ›´æ–°)
   - 5åˆ†é˜ / 15åˆ†é˜ / 1å°æ™‚ æŒ‰éˆ•
   - æ—¥å…§åœ–è¡¨ (Intraday Chart)
   - ç›¤å‰è¨ˆåŠƒå¡ç‰‡
   - æ—¥å…§äº¤æ˜“å»ºè­°

=============================================================================
å¸¸è¦‹å•é¡Œæ’è§£
=============================================================================

âŒ å•é¡Œ: é€£æ¥è¢«æ‹’çµ• (Connection refused)
   åŸå› : Flask ä¼ºæœå™¨æ²’æœ‰å•Ÿå‹•
   è§£æ±º: åŸ·è¡Œ "python run_app.py"ï¼Œç­‰å¾…çœ‹åˆ° "Running on http://127.0.0.1:5000"

âŒ å•é¡Œ: é é¢ç©ºç™½æˆ–åªé¡¯ç¤º "â€”"
   åŸå› : éœ€è¦åˆ†æè‚¡ç¥¨ (è¼¸å…¥è‚¡ç¥¨ä»£è™Ÿä¸¦é»æ“Š Analyze)
   è§£æ±º: ç¢ºä¿è¼¸å…¥äº†è‚¡ç¥¨ä»£è™Ÿ

âŒ å•é¡Œ: é é¢åŠ è¼‰ä½†é¡¯ç¤ºéŒ¯èª¤è¨Šæ¯
   è§£æ±ºæ­¥é©Ÿ:
     1. æŒ‰ F12 é–‹å•Ÿé–‹ç™¼è€…å·¥å…· (Developer Tools)
     2. é»æ“Š "Console" åˆ†é 
     3. æŸ¥çœ‹ç´…è‰²éŒ¯èª¤è¨Šæ¯
     4. å°‡éŒ¯èª¤è¨Šæ¯è¤‡è£½ä¸¦åˆ†äº«

âŒ å•é¡Œ: "åˆ†æ" æŒ‰éˆ•é»æ“Šå¾Œæ²’æœ‰åæ‡‰
   åŸå› : API ç«¯é»å¯èƒ½å¤±æ•—äº†
   è§£æ±ºæ­¥é©Ÿ:
     1. æŒ‰ F12 é–‹å•Ÿ DevTools
     2. é»æ“Š "Network" åˆ†é 
     3. é‡æ–°é»æ“Š "åˆ†æ" æŒ‰éˆ•
     4. æŸ¥çœ‹ "api/ml/analyze" è«‹æ±‚çš„ç‹€æ…‹ç 
     5. è‹¥çœ‹åˆ°ç´…è‰² (4XX/5XX)ï¼Œé»æ“ŠæŸ¥çœ‹ Response

âŒ å•é¡Œ: ç›¯ç›¤æ¨¡å¼åœ–è¡¨ç©ºç™½
   åŸå› : æ—¥å…§æ•¸æ“šå¯èƒ½é‚„æœªè¼‰å…¥æˆ–å¸‚å ´å·²é—œé–‰
   æ³¨æ„: 
     - yfinance æ—¥å…§æ•¸æ“šåªåœ¨å¸‚å ´é–‹æ”¾æ™‚é–“æœ‰æ•ˆ
     - å¦‚æœæ˜¯ç¾è‚¡ä¼‘è›Šæ™‚é–“ï¼Œæœƒé¡¯ç¤º "ç¾è‚¡ç¾å·²ä¼‘å¸‚"
     - é å¸‚ (Pre-market) æ•¸æ“šæœƒé¡¯ç¤ºç‚ºç°è‰²

âŒ å•é¡Œ: æµè§ˆå™¨æ˜¾ç¤ºè­¦å‘Šæˆ–é”™è¯¯ç¬¦å·
   åŸå› : å¯èƒ½æ˜¯ç¼–ç æˆ–æµè§ˆå™¨å…¼å®¹æ€§é—®é¢˜
   è§£å†³:
     1. å°è¯•æ¸…ç©ºæµè§ˆå™¨ç¼“å­˜: Ctrl+Shift+Del
     2. é‡æ–°åŠ è½½é¡µé¢: F5 æˆ– Ctrl+R
     3. å°è¯•ä¸åŒæµè§ˆå™¨ (Chrome, Edge, Firefox)

=============================================================================
é©—è­‰å‘½ä»¤
=============================================================================

å¿«é€Ÿé©—è­‰ä¼ºæœå™¨æ˜¯å¦é‹è¡Œ:

åœ¨å¦ä¸€å€‹ PowerShell è¦–çª—ä¸­åŸ·è¡Œ:

1. æ¸¬è©¦ä¸»é :
   curl http://127.0.0.1:5000/ml/analyze

2. æ¸¬è©¦ API:
   curl -X POST http://127.0.0.1:5000/api/ml/analyze -H "Content-Type: application/json" -d '{\"ticker\":\"AAPL\"}'

3. æ¸¬è©¦æ—¥å…§åœ–è¡¨:
   curl http://127.0.0.1:5000/api/chart/intraday/AAPL?interval=5m

å¦‚æœé€™äº›å‘½ä»¤è¿”å› HTML æˆ– JSON è€Œä¸æ˜¯ "Connection refused"ï¼Œ
è¡¨ç¤ºä¼ºæœå™¨å·²æ­£ç¢ºå•Ÿå‹•ä¸¦æ­£åœ¨æœå‹™è«‹æ±‚ã€‚

=============================================================================
å¾ŒçºŒèª¬æ˜
=============================================================================

å¦‚æœæŒ‰ç…§ä»¥ä¸Šæ­¥é©Ÿå¾Œä»æœ‰å•é¡Œ:

1. è«‹æª¢æŸ¥ Python ç‰ˆæœ¬æ˜¯å¦ >= 3.10:
   python --version

2. ç¢ºä¿æ‰€æœ‰ä¾è³´å·²å®‰è£:
   pip install -r requirements.txt

3. æª¢æŸ¥çµ‚ç«¯æ©ŸéŒ¯èª¤è¨Šæ¯ (ä¼ºæœå™¨è¼¸å‡ºçš„ä»»ä½•ç´…è‰²æ–‡å­—)

4. æŸ¥çœ‹æ—¥èªŒæ–‡ä»¶ (å¦‚æœæœ‰):
   logs/ æ–‡ä»¶å¤¾ä¸­çš„æœ€æ–°æ–‡ä»¶

5. å¦‚æœé‚„æœ‰å•é¡Œï¼Œè«‹åˆ†äº«:
   - Flask ä¼ºæœå™¨çš„å®Œæ•´éŒ¯èª¤è¨Šæ¯
   - ç€è¦½å™¨é–‹ç™¼è€…å·¥å…·çš„ Console éŒ¯èª¤
   - ç€è¦½å™¨ç‰ˆæœ¬
   - Python ç‰ˆæœ¬

=============================================================================
"""

if __name__ == '__main__':
    # Print the guide
    print(__doc__)
    
    # Also save to file
    guide_file = __file__.replace('startup_guide.py', 'ML_STARTUP_GUIDE.txt')
    try:
        with open(guide_file, 'w', encoding='utf-8') as f:
            f.write(__doc__)
        print(f"\nâœ“ æŒ‡å—å·²ä¿å­˜åˆ°: {guide_file}")
    except Exception as e:
        print(f"æç¤º: ç„¡æ³•ä¿å­˜æ–‡ä»¶ - {e}")
